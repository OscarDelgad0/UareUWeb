async function consultarAPIEmpleados(){try{const a="https://funerariaslatinoamericana.com/asistencia/APIEnviarEmpleados.php",t=await fetch(a);return await t.json()}catch(a){console.log(a)}}async function consultarUltimaHuella(){try{const a="https://funerariaslatinoamericana.com/asistencia/APIEnviarHuella.php",t=await fetch(a);return await t.json()}catch(a){console.log(a)}}async function consultarAPIActualizacion(){try{const a="https://funerariaslatinoamericana.com/asistencia/APISensor.php",t=await fetch(a);return await t.json()}catch(a){console.log(a)}}async function actualizaRegistro(a){const t=new FormData;for(const e in a[0])t.append(e,a[0][e]);t.append("status_registro",1),t.append("status_asistencia",0);try{const a="https://funerariaslatinoamericana.com/asistencia/POSTCambios.php",e=await fetch(a,{method:"POST",body:t});await e.json()}catch(a){}}async function colocarEmpleados(){const a=await consultarAPIActualizacion();var t=parseInt(a[0].status_registro),e=Boolean(t),o=parseInt(a[0].status_asistencia),n=Boolean(o);e&&console.log("Sin cambios"),e||actualizaRegistro(a),e&&n&&actualizaRegistro(a);const c=await consultarAPIEmpleados(),s=document.querySelector("#empleado");console.log(c),c.forEach(a=>{const{id:t,nombre:e,id_huella:o}=a;if(console.log(o),0!=o&&null!=o);else{const a=document.createElement("OPTION");a.value=t,a.text=e,s.appendChild(a)}})}async function colocarHuella(){const a=await consultarUltimaHuella(),t=document.querySelector(".id"),e=document.querySelector(".fecha"),o=document.querySelector(".hora"),n=document.querySelector(".id-huella"),c=document.querySelector(".id-empleado"),{id:s,id_empleado:i,fecha_creacion:l,hora_creacion:r}=a[0];i?console.log("Huella ya registrada con usuario, desea sobreescribir?"):(t.textContent=s,e.textContent=l,o.textContent=r,n.value=s,c.value=s)}document.addEventListener("DOMContentLoaded",(function(){colocarEmpleados(),colocarHuella(),verificador()}));